<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Catering Request</title>
  <style>
    :root{
      --bg:#FEF1FF;
      --card:#ffffff;
      --ink:#1a2433;
      --muted:#5b6471;
      --border:#e7d9f0;
      --accent:#7b61ff;
      --accent-2:#ff6bb3;
      --danger:#ef4444;
      --success:#10b981;
    }
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);}    
    .container{max-width:980px;margin:0 auto;padding:20px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:18px;box-shadow:0 10px 30px rgba(31,41,55,.08);overflow:hidden}
    header.hero{padding:20px;border-bottom:1px solid var(--border);display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:720px){header.hero{grid-template-columns:auto 1fr auto;align-items:center}}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:44px;height:44px;border-radius:12px;background:conic-gradient(from 210deg, var(--accent), var(--accent-2));opacity:.9}
    h1{color:var(--ink);margin:0;font-size:1.35rem}
    .sub{color:var(--muted);font-size:.95rem}

    form{padding:20px;display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:760px){form{grid-template-columns:repeat(12,1fr)} .span-12{grid-column:span 12}}
    fieldset{border:1px solid var(--border);border-radius:14px;padding:14px;margin:0}
    legend{padding:0 8px;color:var(--muted);font-size:.95rem}
    label{display:block;color:var(--ink);font-weight:600;margin-bottom:6px}

    .row{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:640px){.row{grid-template-columns:1fr 1fr}}

    /* form inputs (text-like only) */
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="number"],
    input[type="date"],
    input[type="time"],
    textarea,
    select{
      width:100%;
      padding:12px 14px;
      border-radius:12px;
      border:1px solid var(--border);
      background:#fff;
      color:var(--ink);
      font-size:16px;
    }
    textarea{min-height:110px;resize:vertical}

    /* compact checkbox / radio chips */
    .choices{display:flex;flex-wrap:wrap;gap:8px 10px;margin:6px 0 2px}
    .choice{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:#fff;cursor:pointer;user-select:none;line-height:1}
    .choice input{width:18px;height:18px;flex:0 0 auto;margin:0;accent-color:var(--accent)}

    .actions{display:grid;grid-template-columns:1fr;gap:10px}
    @media(min-width:560px){.actions{grid-template-columns:auto auto auto auto}}
    button{border:none;border-radius:12px;padding:12px 16px;font-weight:750;cursor:pointer;font-size:16px}
    .primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white}
    .ghost{background:#fff;color:var(--ink);border:1px solid var(--border)}
    .danger{background:var(--danger);color:white}
    .footer{padding:16px 20px;border-top:1px solid var(--border);display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;color:var(--muted);font-size:.9rem}

    dialog{border:none;border-radius:16px;background:#fff;color:var(--ink);width:min(720px,94vw);box-shadow:0 10px 40px rgba(0,0,0,.18)}
    dialog::backdrop{background:rgba(0,0,0,.35)}
    .modal-head{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border);padding:14px 16px}
    .modal-body{padding:16px}
    .modal-actions{display:flex;gap:10px;justify-content:flex-end;padding:16px;border-top:1px solid var(--border)}
    pre{white-space:pre-wrap;background:#f9f6ff;border:1px solid var(--border);border-radius:12px;padding:12px}
    .required::after{content:" *";color:var(--danger)}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <header class="hero">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <h1>Event Catering Request</h1>
            <div class="sub">Looks great on desktop and phone. We‚Äôll follow up with a custom proposal.</div>
          </div>
        </div>
        <div class="sub">üìû <a href="tel:+10000000000" style="color:var(--accent);text-decoration:none">(000) 000-0000</a> ¬∑ ‚úâÔ∏è <a href="mailto:orders@yourcatering.com" style="color:var(--accent);text-decoration:none">orders@yourcatering.com</a></div>
      </header>

      <form id="cateringForm" novalidate>
        <fieldset class="span-12">
          <legend>Contact</legend>
          <div class="row">
            <div><label for="name" class="required">Name</label><input id="name" name="name" required></div>
            <div><label for="email" class="required">Email</label><input id="email" name="email" type="email" required></div>
          </div>
          <div class="row">
            <div><label for="phone" class="required">Phone</label><input id="phone" name="phone" required></div>
            <div><label for="company">Company / Organization</label><input id="company" name="company"></div>
          </div>
          <div class="row">
            <div><label for="costCenter">Cost Center</label><input id="costCenter" name="costCenter" placeholder="Billing code or department"></div>
          </div>
        </fieldset>

        <fieldset class="span-12">
          <legend>Event Details</legend>
          <div class="row">
            <div><label for="eventDate" class="required">Event Date</label><input id="eventDate" name="eventDate" type="date" required></div>
            <div><label for="location" class="required">Location / Address</label><input id="location" name="location" required></div>
          </div>
          <div class="row">
            <div><label for="startTime" class="required">Start Time</label><input id="startTime" name="startTime" type="time" required></div>
            <div><label for="endTime" class="required">End Time</label><input id="endTime" name="endTime" type="time" required></div>
          </div>
          <div class="row">
            <div><label for="guests" class="required">Estimated Guest #</label><input id="guests" name="guests" type="number" min="1" required></div>
            <div><label for="serviceStyle" class="required">Service Style</label>
              <select id="serviceStyle" name="serviceStyle" required>
                <option value="" disabled selected>Select‚Ä¶</option>
                <option>Disposable</option>
                <option>China</option>
              </select>
            </div>
          </div>
        </fieldset>

        <fieldset class="span-12">
          <legend>Meal Preferences</legend>
          <label class="required">Type of Service (select all that apply)</label>
          <div class="choices" role="group" aria-label="Meal types">
            <label class="choice"><input type="checkbox" name="mealTypes" value="Breakfast"><span>Breakfast</span></label>
            <label class="choice"><input type="checkbox" name="mealTypes" value="Lunch"><span>Lunch</span></label>
            <label class="choice"><input type="checkbox" name="mealTypes" value="Snacks"><span>Snacks</span></label>
            <label class="choice"><input type="checkbox" name="mealTypes" value="Appetizers"><span>Appetizers</span></label>
            <label class="choice"><input type="checkbox" name="mealTypes" value="Dinner"><span>Dinner</span></label>
          </div>
          <div class="row" style="margin-top:8px">
            <div>
              <label class="required">Menu Preference</label>
              <div class="choices" role="radiogroup" aria-label="Menu">
                <label class="choice"><input type="radio" name="menuPref" value="Preferred Menu" required><span>Preferred Menu</span></label>
                <label class="choice"><input type="radio" name="menuPref" value="Open to Suggestions" required><span>Open to Suggestions</span></label>
              </div>
              <textarea id="menuNotes" name="menuNotes" placeholder="Dietary preferences, cuisine ideas, must-haves" style="margin-top:8px"></textarea>
            </div>
            <div>
              <label class="required">Catering Type</label>
              <div class="choices" role="radiogroup" aria-label="Catering type">
                <label class="choice"><input type="radio" name="cateringType" value="Regular" required><span>Regular</span></label>
                <label class="choice"><input type="radio" name="cateringType" value="VIP" required><span>VIP</span></label>
              </div>
            </div>
          </div>
        </fieldset>

        <fieldset class="span-12">
          <legend>Budget</legend>
          <div class="row">
            <div><label for="budgetPer" class="required">Budget per Person (USD)</label><input id="budgetPer" name="budgetPer" type="number" min="0" step="0.01" required></div>
            <div><label for="totalBudget">Total Budget (USD)</label><input id="totalBudget" name="totalBudget" type="number" min="0" step="0.01"></div>
          </div>
          <div class="row">
            <div><label class="choice" style="padding:8px 10px"><input type="checkbox" id="rush" name="rush"><span>Last-Minute Event (within 48 hrs) ‚Äî $200 rush fee</span></label></div>
          </div>
          <div class="row">
            <div class="summary" style="border:1px dashed var(--border);border-radius:12px;padding:12px;background:#fff">
              <strong>Live Estimate</strong>
              <div id="estimateLines" style="margin-top:6px">
                <div>Guests √ó Per-person: <strong id="calcBase">‚Äî</strong></div>
                <div>Rush Fee: <strong id="calcRush">‚Äî</strong></div>
                <div style="margin-top:6px">Estimated Total: <strong id="calcTotal">‚Äî</strong></div>
              </div>
              <div class="sub" style="margin-top:6px">For guidance only. Final quote follows review.</div>
            </div>
          </div>
        </fieldset>

        <fieldset class="span-12">
          <legend>Additional Notes</legend>
          <textarea id="notes" name="notes"></textarea>
        </fieldset>

        <div class="span-12 actions">
          <button class="primary" type="submit">Preview & Send</button>
          <button class="ghost" type="button" id="copyBtn">Copy Summary</button>
          <button class="ghost" type="button" id="printBtn">Print / Save PDF</button>
          <button class="danger" type="reset">Clear</button>
        </div>
      </form>

      <div class="footer">¬© <span id="year"></span> Your Catering Co. ¬∑ By submitting, you agree to be contacted about your event.</div>
    </div>
  </div>

  <dialog id="previewModal">
    <div class="modal-head"><strong>Request Preview</strong><button class="ghost" onclick="closeModal()">Close</button></div>
    <div class="modal-body"><pre id="previewText"></pre></div>
    <div class="modal-actions">
      <button class="ghost" onclick="copySummary()">Copy</button>
      <button class="success" id="sendBtn">Send</button>
      <button class="primary" onclick="window.print()">Print / Save PDF</button>
    </div>
  </dialog>

  <script>
    const $ = s => document.querySelector(s);
    const $$ = s => [...document.querySelectorAll(s)];
    $('#year').textContent = new Date().getFullYear();
    $('#eventDate').setAttribute('min', new Date().toISOString().split('T')[0]);

    const form = $('#cateringForm');
    const rush = $('#rush');
    const guests = $('#guests');
    const budgetPer = $('#budgetPer');
    const totalBudget = $('#totalBudget');
    const calcBase = $('#calcBase');
    const calcRush = $('#calcRush');
    const calcTotal = $('#calcTotal');

    const money = n => (isNaN(n) || !isFinite(n)) ? '‚Äî' : n.toLocaleString(undefined,{style:'currency',currency:'USD',maximumFractionDigits:0});
    function estimate(){
      const g = parseInt(guests.value,10) || 0;
      const per = parseFloat(budgetPer.value) || 0;
      const base = g * per;
      const rushFee = rush.checked ? 200 : 0;
      const total = (totalBudget.value ? parseFloat(totalBudget.value) : base) + rushFee;
      calcBase.textContent = base ? money(base) : '‚Äî';
      calcRush.textContent = rushFee ? money(rushFee) : '$0';
      calcTotal.textContent = total ? money(total) : '‚Äî';
    }
    ['input','change'].forEach(ev=>[guests,budgetPer,totalBudget,rush].forEach(el=>el.addEventListener(ev,estimate)));
    estimate();

    function serialize(){
      const d = new FormData(form);
      const mealTypes = $$('input[name="mealTypes"]:checked').map(x=>x.value);
      const menuPref = document.querySelector('input[name="menuPref"]:checked')?.value || '';
      const cateringType = document.querySelector('input[name="cateringType"]:checked')?.value || '';
      return {
        name: d.get('name'),
        email: d.get('email'),
        phone: d.get('phone'),
        company: d.get('company')||'',
        costCenter: d.get('costCenter')||'',
        eventDate: d.get('eventDate'),
        location: d.get('location'),
        startTime: d.get('startTime'),
        endTime: d.get('endTime'),
        guests: d.get('guests'),
        serviceStyle: d.get('serviceStyle'),
        mealTypes,
        menuPref,
        menuNotes: d.get('menuNotes')||'',
        cateringType,
        budgetPer: d.get('budgetPer'),
        totalBudget: d.get('totalBudget')||'',
        rush: !!d.get('rush'),
        notes: d.get('notes')||''
      };
    }

    function requiredFilled(){
      const req = ['name','email','phone','eventDate','location','startTime','endTime','guests','serviceStyle','budgetPer'];
      for(const id of req){ if(!document.getElementById(id).value){ alert('Missing '+id); return false; } }
      if($$('input[name="mealTypes"]:checked').length===0){ alert('Select at least one meal type.'); return false; }
      if(!document.querySelector('input[name="menuPref"]:checked')){ alert('Select a menu preference.'); return false; }
      if(!document.querySelector('input[name="cateringType"]:checked')){ alert('Select a catering type.'); return false; }
      return true;
    }

    function pretty(o){
      const base = (parseInt(o.guests||0,10) * parseFloat(o.budgetPer||0))||0;
      const rushFee = o.rush ? 200 : 0;
      const estTotal = (o.totalBudget? parseFloat(o.totalBudget): base) + rushFee;
      const list = a => a && a.length ? a.join(', ') : '(none)';
      return (
`CATERING REQUEST

`+
`CONTACT
  Name: ${o.name}
  Email: ${o.email}
  Phone: ${o.phone}
  Company: ${o.company||'(n/a)'}
  Cost Center: ${o.costCenter||'(n/a)'}

`+
`EVENT
  Date: ${o.eventDate}
  Location: ${o.location}
  Start: ${o.startTime}
  End: ${o.endTime}
  Guests: ${o.guests}
  Service Style: ${o.serviceStyle}

`+
`MEALS
  Types: ${list(o.mealTypes)}
  Menu Preference: ${o.menuPref}
  Menu Notes: ${o.menuNotes || '(none)'}
  Catering Type: ${o.cateringType}

`+
`BUDGET
  Per Person: $${Number(o.budgetPer||0).toFixed(2)}
  Total Budget: ${o.totalBudget? `$${Number(o.totalBudget).toFixed(2)}`:'(not specified)'}
  Rush (48h): ${o.rush?'Yes':'No'}

`+
`ESTIMATE
  Guests √ó Per-person: $${base.toFixed(2)}
  Rush Fee: $${rushFee.toFixed(2)}
  Estimated Total: $${estTotal.toFixed(2)}

`+
`NOTES
  ${o.notes || '(none)'}

‚Äî Submitted via website`
      );
    }

    function bodyText(o){
      const base = (parseInt(o.guests||0,10) * parseFloat(o.budgetPer||0))||0;
      const rushFee = o.rush ? 200 : 0;
      const estTotal = (o.totalBudget? parseFloat(o.totalBudget): base) + rushFee;
      const lines = [
        'CATERING REQUEST','',
        '[CONTACT]',
        `Name: ${o.name}`,
        `Email: ${o.email}`,
        `Phone: ${o.phone}`,
        `Company: ${o.company || '(n/a)'}`,
        `Cost Center: ${o.costCenter || '(n/a)'}`,
        '',
        '[EVENT]',
        `Date: ${o.eventDate}`,
        `Location: ${o.location}`,
        `Start: ${o.startTime}`,
        `End: ${o.endTime}`,
        `Guests: ${o.guests}`,
        `Service Style: ${o.serviceStyle}`,
        '',
        '[MEALS]',
        `Types: ${o.mealTypes && o.mealTypes.length? o.mealTypes.join(', ') : '(none)'}`,
        `Menu Preference: ${o.menuPref}`,
        `Menu Notes: ${o.menuNotes || '(none)'}`,
        `Catering Type: ${o.cateringType}`,
        '',
        '[BUDGET]',
        `Per Person: $${Number(o.budgetPer||0).toFixed(2)}`,
        `Total Budget: ${o.totalBudget? `$${Number(o.totalBudget).toFixed(2)}` : '(not specified)'}`,
        `Rush (48h): ${o.rush? 'Yes (+$200)' : 'No'}`,
        '',
        '[ESTIMATE]',
        `Guests √ó Per-person: $${base.toFixed(2)}`,
        `Rush Fee: $${rushFee.toFixed(2)}`,
        `Estimated Total: $${estTotal.toFixed(2)}`,
        '',
        '[NOTES]',
        `${o.notes || '(none)'}`,
        '',
        '‚Äî Submitted via website'
      ];
      return lines.join('
');
    }

    function openModal(text){ $('#previewText').textContent = text; $('#previewModal').showModal(); }
    function closeModal(){ $('#previewModal').close(); }
    function copySummary(){ navigator.clipboard.writeText($('#previewText').textContent); }
    function mailtoLink(body){ return `mailto:orders@yourcatering.com?subject=${encodeURIComponent('New Catering Request')}&body=${encodeURIComponent(body)}`; }

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      if(!requiredFilled()) return;
      const o = serialize();
      openModal(pretty(o));
      $('#sendBtn').onclick = ()=> window.location.href = mailtoLink(bodyText(o));
    });

    $('#copyBtn').addEventListener('click', ()=>{ if(!requiredFilled()) return; copySummary(); });
    $('#printBtn').addEventListener('click', ()=> window.print());
  </script>
</body>
</html>
